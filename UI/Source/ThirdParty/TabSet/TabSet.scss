@layer components.tabset {
	$tabset_max_tabs: 10;

	:root {
		--ui-tab-link-padding: #{toRem(15)};
		--ui-tab-padding: #{toRem(30)} #{toRem(15)};
	//	--ui-tab-border: 1px solid transparent;
		--ui-tab-border-color: #ccc;
		--ui-tab-background-color: #fff;
	}

	.ui-tabset {
		$tabset: &;

		// for each tab - if selected, show corresponding panel
		@for $tab from 1 through $tabset_max_tabs {

			> #{$tabset}__link:nth-child(#{$tab}):has(input[type="radio"]:checked) ~ #{$tabset}__panels > #{$tabset}__panel:nth-child(#{$tab}),
			> #{$tabset}__link#{$tabset}__link--selected:nth-child(#{$tab}) ~ #{$tabset}__panels > #{$tabset}__panel:nth-child(#{$tab}) {
				display: block;
			}
		}

		// render tab links without a background
		&--links {

			#{$tabset}__link {

				// tab - inactive state
				> label,
				> a {
					border: 0;
				}

				// tab - highlight state
				> label:hover,
				> a:hover,
				> input[type="radio"]:focus + label,
				> input[type="radio"]:checked + label {
					color: var(--ui-link);
					text-decoration: underline;
				}
			
				> input[type="radio"] {
				
					&:checked + label {
						border: 0;
						margin-bottom: 0;
						background: none;
					}
				
				}

				&--selected {

					> a {
						border: 0;
						margin-bottom: 0;
						background: none;
						color: var(--ui-link);
						text-decoration: underline;
						/*
						border-color: var(--ui-tab-border-color);
						border-bottom: 1px solid var(--ui-tab-background-color);
						margin-bottom: -1px;
						background: var(--ui-tab-background-color);

						&:focus-visible {
							outline: 2px solid var(--ui-primary);
							border-radius: toRem(3);
						}
						*/
					}
				}


			}

		}

		&__link {
			position: relative;
			display: inline-block;

			// tab - inactive state
			> label,
			> a {
				position: relative;
				display: inline-block;
				padding: var(--ui-tab-link-padding);
				//border: var(--ui-tab-border);
				border: 1px solid transparent;
				border-bottom: 0;
				cursor: pointer;
				font-weight: 600;
				text-align: center;
				color: var(--ui-site-fg);
				text-decoration: none;
			}

			// tab - highlight state
			> label:hover,
			> a:hover,
			> input[type="radio"]:focus + label,
			> input[type="radio"]:checked + label {
				color: var(--ui-primary);
			}

			> input[type="radio"] {
				position: absolute;
				z-index: 1;
				width: 100%;
				height: 100%;
				cursor: pointer;
				opacity: 0;

				// tab - checked state
				&:checked + label {
					border-color: var(--ui-tab-border-color);
					border-bottom: 1px solid var(--ui-tab-background-color);
					margin-bottom: -1px;
					background: var(--ui-tab-background-color);
				}

				// tab - focus state
				&:focus-visible + label {
					outline: 2px solid var(--ui-primary);
					border-radius: toRem(3);
				}
			}

			&--selected {

				> a {
					border-color: var(--ui-tab-border-color);
					border-bottom: 1px solid var(--ui-tab-background-color);
					margin-bottom: -1px;
					background: var(--ui-tab-background-color);

					&:focus-visible {
						outline: 2px solid var(--ui-primary);
						border-radius: toRem(3);
					}
				}
			}

		}

		&__panels {
			background: var(--ui-tab-background-color);
			border: 1px solid var(--ui-tab-border-color);
			border-top: 0;
			//max-width: 300px;
		}

		&__panel {
			display: none;
			padding: var(--ui-tab-padding);
			border-top: 1px solid var(--ui-tab-border-color);
		}
	}

}
