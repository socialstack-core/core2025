// default to wide layout
// (e.g. list view / shopping cart)
.ui-product-signpost {
	$ui-product-signpost: &;
	$signpost-padding: px_to_rem(8);
	container-name: product-signpost;
	container-type: inline-size;

	&__outer {
		display: flex;
		gap: px_to_rem(24);
		align-items: center;
		transition: box-shadow .3s ease-in-out;
		border-radius: px_to_rem(8);
		padding: $signpost-padding;
	}

	&__inner,
	&__inner.ui-link {
		flex-grow: 1;
		display: grid;
		gap: px_to_rem(12) px_to_rem(24);
		grid-template-columns: px_to_rem(150) 1fr;
		grid-template-rows: 1fr auto 1fr;
		grid-template-areas:
			"image category price"
			"image name price"
			"image stock price";
		outline: 0 !important;
	}

	.ui-product-qty {
		flex-shrink: 0;
	}

	&:hover {
		box-shadow: 0 0 px_to_rem(16) 0 rgba(#210818, 25%);
	}

	&:has(#{$ui-product-signpost}__inner:focus-within) {
		box-shadow: 
			0 0 0 0.25rem var(--primary-shadow), 
			0 0 1rem 0 rgba(33, 8, 24, .25);
	}

	&__image {
		grid-area: image;
		position: relative;
		//width: 100%; // padded
		width: calc(100% + (2 * #{$signpost-padding});
		margin-top: -$signpost-padding;
		aspect-ratio: 1;
	}

	&__featured {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		border-radius: px_to_rem(8) 0 0 0;
		background: var(--secondary);
		font-size: px_to_rem(10);
		color: var(--secondary-fg);
		display: flex;
		align-items: center;
		padding: px_to_rem(4) px_to_rem(8);
		gap: px_to_rem(8);
		z-index: 1;

		> i {
			font-size: px_to_rem(13);
		}

	}

	.ui-image__wrapper {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 100%;
		height: 100%;

		&::after {
			content: "";
			background: linear-gradient(225deg, rgba(255, 255, 255, 0) 0%, rgba(74, 74, 73, 0.1) 100%);
			position: absolute;
			inset: 0;
		}

		.ui-image {
			max-width: 100%;
			//height: auto;
			width: 100%;
			height: 100%;
			//object-fit: cover;
			object-fit: contain;
			//aspect-ratio: 149 / 140;
		}

	}

	&__approved {
		position: absolute;
		left: px_to_rem(4);
		bottom: px_to_rem(4);
		border-radius: px_to_rem(4);
		width: px_to_rem(28);
		height: px_to_rem(28);
		display: flex;
		align-items: center;
		justify-content: center;
		background: var(--secondary);
		color: var(--secondary-fg);
		padding: 0 !important;

		> i {
			color: var(--secondary-fg);
			font-size: px_to_rem(13);
		}

	}

	&__category {
		grid-area: category;
		align-self: end;
		display: flex;
		align-items: center;
		gap: px_to_rem(8);
		font-size: px_to_rem(10);
		color: var(--site-fg, #000);
		text-decoration: none !important;
		white-space: nowrap;
		width: 100%;

		> i {
			font-size: px_to_rem(12);
			flex-shrink: 0;
		}

		span {
			overflow: hidden;
			text-overflow: ellipsis;
		}
	}

	&__name {
		grid-area: name;
		font-size: px_to_rem(15);
		color: var(--site-fg, #000);
		display: -webkit-box;
		-webkit-box-orient: vertical;
		-webkit-line-clamp: 2;
		line-clamp: 2;
		overflow: hidden;
		text-decoration: none !important;
	}

	&--disabled {

		#{$ui-product-signpost}__outer {
			padding: 0;
		}

		#{$ui-product-signpost}__name {
			min-height: 0;
		}

		&:hover {
			box-shadow: none;
		}
	}

	.ui-product-stock {
		grid-area: stock;
		align-self: start;
	}

	.ui-product-qty {
		//width: px_to_rem(196);
		min-width: px_to_rem(196);
	}

	.ui-product-price {
		grid-area: price;
	}
}

@container product-signpost (width < #{px_to_rem(350)}) {

	.ui-product-signpost {

		&__outer {
			flex-direction: column;
			gap: px_to_rem(12);
			align-items: flex-start;
		}

		&__inner,
		&__inner.ui-link {
			display: flex;
			flex-direction: column;
			gap: px_to_rem(12);
		}

		&__approved {
			width: px_to_rem(40);
			height: px_to_rem(40);

			> i {
				font-size: px_to_rem(24);
			}

		}

		&__name {
			align-self: flex-start;
			min-height: px_to_rem(45);
		}

		.ui-product-price {
			align-self: flex-start;
		}

		.ui-product-qty {
			width: 100%;
			min-width: 0;
		}

	}
}

@container product-signpost (width < #{px_to_rem(200)}) {

	.ui-product-signpost {

		&__approved {
			width: px_to_rem(28);
			height: px_to_rem(28);

			> i {
				font-size: px_to_rem(13);
			}

		}

		&__name {
			align-self: flex-start;
			-webkit-line-clamp: 3;
			line-clamp: 3;
			min-height: px_to_rem(67.5);
		}
	}
}
