#!/bin/bash
# === pre-commit hook (Bash version) ===

# Exit on any error
set -e

# Navigate to the project root from .git/hooks
cd "$(dirname "$0")/../.."

# Path to the pre-commit hook scripts
HOOK_DIR="scripts/pre-commit"

# Check if the directory exists
if [ -d "$HOOK_DIR" ]; then
  cd "$HOOK_DIR"

  # Loop over all .js files and run them
  for file in *.js; do
    echo "Running Node script: $file"
    node "$file" || {
      echo "Script $file failed. Aborting commit."
      exit 1
    }
  done
else
  echo "No pre-commit scripts found in $HOOK_DIR."
fi

exit 0
